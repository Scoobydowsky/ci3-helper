<idea-plugin>
    <id>scoobydowsky.ci.helper</id>
    <name>CodeIgniter 3 Helper</name>
    <vendor>Tomek "Scoobydowsky" Woytkowiak</vendor>

    <!-- Plugin tylko dla PhpStorm: wymaga PHP, wyklucza IDE z moduÅ‚em Java (IDEA). -->
    <depends>com.intellij.modules.platform</depends>
    <depends>com.jetbrains.php</depends>
    <incompatible-with>com.intellij.java</incompatible-with>

    <resource-bundle>messages.MyBundle</resource-bundle>

    <extensions defaultExtensionNs="com.intellij">

        <applicationService
                serviceImplementation="dev.woytkowiak.ci.helper.ci.Ci3PluginState"/>

        <configurationType implementation="dev.woytkowiak.ci.helper.ci.cli.Ci3CliConfigurationType"/>

        <statusBarWidgetFactory
                id="CodeIgniter3Helper"
                implementation="dev.woytkowiak.ci.helper.ci.statusbar.Ci3StatusBarWidgetFactory"/>

        <completion.contributor
                language="PHP"
                implementationClass="dev.woytkowiak.ci.helper.ci.completion.CiModelCompletionContributor"/>
        <psi.referenceContributor
                implementation="dev.woytkowiak.ci.helper.ci.navigation.CiViewReferenceContributor"/>
        <psi.referenceContributor
                implementation="dev.woytkowiak.ci.helper.ci.navigation.CiRouteReferenceContributor"/>
        <psi.referenceContributor
                implementation="dev.woytkowiak.ci.helper.ci.navigation.CiLibraryReferenceContributor"/>
        <psi.referenceContributor
                implementation="dev.woytkowiak.ci.helper.ci.navigation.CiDriverReferenceContributor"/>
        <psi.referenceContributor
                implementation="dev.woytkowiak.ci.helper.ci.navigation.CiModelReferenceContributor"/>
        <psi.referenceContributor
                implementation="dev.woytkowiak.ci.helper.ci.navigation.CiHelperReferenceContributor"/>
        <psi.referenceContributor
                implementation="dev.woytkowiak.ci.helper.ci.navigation.CiConfigReferenceContributor"/>

        <!-- Intention "Add CI3 Super Object @property" removed from XML: platform expected
             implementation class under an attribute that differs by IDE version.
             The intention class remains in code; can be re-added when the correct
             attribute (e.g. implementationClassName / implementationClass / class) is confirmed. -->
        <lang.inspectionSuppressor
                language="PHP"
                implementationClass="dev.woytkowiak.ci.helper.ci.suppress.Ci3UndefinedFieldSuppressor"/>

        <lang.findUsagesProvider
                language="PHP"
                implementationClass="dev.woytkowiak.ci.helper.ci.navigation.CiViewFindUsagesProvider"/>

        <localInspection
                id="Ci3DeprecatedCartUsage"
                shortName="Ci3DeprecatedCart"
                displayName="Deprecated CodeIgniter 3 Cart library usage"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3DeprecatedCartUsageInspection"/>
        <localInspection
                id="Ci3HtmlHelperNotLoaded"
                shortName="Ci3HtmlHelperNotLoaded"
                displayName="HTML helper function used without loading HTML helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3HtmlHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3InflectorHelperNotLoaded"
                shortName="Ci3InflectorHelperNotLoaded"
                displayName="Inflector helper function used without loading Inflector helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3InflectorHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3LanguageHelperNotLoaded"
                shortName="Ci3LanguageHelperNotLoaded"
                displayName="Language helper function used without loading Language helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3LanguageHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3NumberHelperNotLoaded"
                shortName="Ci3NumberHelperNotLoaded"
                displayName="Number helper function used without loading Number helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3NumberHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3PathHelperNotLoaded"
                shortName="Ci3PathHelperNotLoaded"
                displayName="Path helper function used without loading Path helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3PathHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3SecurityHelperNotLoaded"
                shortName="Ci3SecurityHelperNotLoaded"
                displayName="Security helper function used without loading Security helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3SecurityHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3SmileyHelperNotLoaded"
                shortName="Ci3SmileyHelperNotLoaded"
                displayName="Smiley helper function used without loading Smiley helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3SmileyHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3StringHelperNotLoaded"
                shortName="Ci3StringHelperNotLoaded"
                displayName="String helper function used without loading String helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3StringHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3TextHelperNotLoaded"
                shortName="Ci3TextHelperNotLoaded"
                displayName="Text helper function used without loading Text helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3TextHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3TypographyHelperNotLoaded"
                shortName="Ci3TypographyHelperNotLoaded"
                displayName="Typography helper function used without loading Typography helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3TypographyHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3UrlHelperNotLoaded"
                shortName="Ci3UrlHelperNotLoaded"
                displayName="URL helper function used without loading URL helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3UrlHelperNotLoadedInspection"/>
        <localInspection
                id="Ci3XmlHelperNotLoaded"
                shortName="Ci3XmlHelperNotLoaded"
                displayName="XML helper function used without loading XML helper"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3XmlHelperNotLoadedInspection"/>

        <localInspection
                id="Ci3ReservedControllerName"
                shortName="Ci3ReservedControllerName"
                displayName="Reserved CodeIgniter 3 controller name used"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="ERROR"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3ReservedControllerNameInspection"/>
        <localInspection
                id="Ci3ControllerConstructor"
                shortName="Ci3ControllerConstructor"
                displayName="CI3 controller constructor must call parent::__construct()"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="ERROR"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3ControllerConstructorInspection"/>
        <localInspection
                id="Ci3CliOnlyIsCliGuard"
                shortName="Ci3CliOnlyIsCliGuard"
                displayName="CLI-only controller should guard execution with is_cli()"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3CliOnlyControllerShouldCheckIsCliInspection"/>
        <localInspection
                id="Ci3ReservedFunctionName"
                shortName="Ci3ReservedFunctionName"
                displayName="Reserved CodeIgniter 3 function name declared"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="ERROR"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3ReservedFunctionNameInspection"/>
        <localInspection
                id="Ci3ReservedVariableName"
                shortName="Ci3ReservedVariableName"
                displayName="Reserved CodeIgniter 3 variable name used"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="WARNING"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3ReservedVariableNameInspection"/>
        <localInspection
                id="Ci3ReservedConstantName"
                shortName="Ci3ReservedConstantName"
                displayName="Reserved CodeIgniter 3 constant name declared"
                groupPath="PHP"
                groupName="CodeIgniter 3"
                enabledByDefault="true"
                level="ERROR"
                implementationClass="dev.woytkowiak.ci.helper.ci.inspection.Ci3ReservedConstantNameInspection"/>

    </extensions>

    <extensions defaultExtensionNs="com.jetbrains.php">
        <includedPathsContributor implementation="dev.woytkowiak.ci.helper.ci.stubs.Ci3StubIncludePathContributor"/>
        <typeProvider4 implementation="dev.woytkowiak.ci.helper.ci.types.Ci3ThisTypeProvider"/>
        <typeProvider4 implementation="dev.woytkowiak.ci.helper.ci.types.Ci3ModelTypeProvider"/>
        <typeProvider4 implementation="dev.woytkowiak.ci.helper.ci.types.Ci3LibraryTypeProvider"/>
    </extensions>

    <extensions defaultExtensionNs="com.intellij">
        <internalFileTemplate name="CI3 Controller.php"/>
        <internalFileTemplate name="CI3 Model.php"/>
        <internalFileTemplate name="CI3 View.php"/>
        <internalFileTemplate name="CI3 API Controller.php"/>
        <internalFileTemplate name="CI3 Library.php"/>
        <internalFileTemplate name="CI3 CLI Task Controller.php"/>
    </extensions>

    <actions>
        <group id="NewCodeIgniter3Group" text="%group.NewCodeIgniter3Group.text" popup="true" icon="dev.woytkowiak.ci.helper.ci.Ci3Icons.Ci3">
            <add-to-group group-id="NewGroup" anchor="first"/>
            <action id="Create.Ci3.Controller"
                    class="dev.woytkowiak.ci.helper.ci.actions.CreateCi3ControllerAction"
                    text="%action.create.ci3.controller.text"
                    description="%action.create.ci3.controller.text"/>
            <action id="Create.Ci3.CliTaskController"
                    class="dev.woytkowiak.ci.helper.ci.actions.CreateCi3CliTaskControllerAction"
                    text="%action.create.ci3.cli.controller.text"
                    description="%action.create.ci3.cli.controller.text"/>
            <action id="Create.Ci3.Model"
                    class="dev.woytkowiak.ci.helper.ci.actions.CreateCi3ModelAction"
                    text="%action.create.ci3.model.text"
                    description="%action.create.ci3.model.text"/>
            <action id="Create.Ci3.View"
                    class="dev.woytkowiak.ci.helper.ci.actions.CreateCi3ViewAction"
                    text="%action.create.ci3.view.text"
                    description="%action.create.ci3.view.text"/>
            <action id="Create.Ci3.ApiController"
                    class="dev.woytkowiak.ci.helper.ci.actions.CreateCi3ApiControllerAction"
                    text="%action.create.ci3.api.text"
                    description="%action.create.ci3.api.text"/>
            <action id="Create.Ci3.Library"
                    class="dev.woytkowiak.ci.helper.ci.actions.CreateCi3LibraryAction"
                    text="%action.create.ci3.library.text"
                    description="%action.create.ci3.library.text"/>
        </group>

        <group id="Ci3CliContextGroup" text="%group.Ci3CliContextGroup.text" popup="true" icon="dev.woytkowiak.ci.helper.ci.Ci3Icons.Ci3">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <action id="Ci3.Cli.RunController"
                    class="dev.woytkowiak.ci.helper.ci.actions.RunCi3CliControllerAction"
                    text="%action.ci3.cli.run.text"
                    description="%action.ci3.cli.run.description"/>
            <action id="Ci3.Cli.CopyCommand"
                    class="dev.woytkowiak.ci.helper.ci.actions.CopyCi3CliCommandAction"
                    text="%action.ci3.cli.copy.text"
                    description="%action.ci3.cli.copy.description"/>
        </group>

        <action id="Support.Ci3.Author"
                class="dev.woytkowiak.ci.helper.ci.actions.SupportAuthorAction"
                text="%action.support.author.text"
                description="%action.support.author.description">
            <add-to-group group-id="HelpMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
